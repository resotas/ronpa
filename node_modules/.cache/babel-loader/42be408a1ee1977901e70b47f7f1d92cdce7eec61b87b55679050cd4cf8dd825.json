{"ast":null,"code":"import React,{useState}from\"react\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Chat(){const[messages,setMessages]=useState([]);const[input,setInput]=useState(\"\");const sendMessage=async()=>{if(!input)return;const userMessage={sender:\"user\",text:input};setMessages(prev=>[...prev,userMessage]);try{const response=await fetch(\"/api/generate-response\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({message:input})});if(!response.ok){throw new Error(`APIリクエストエラー: ${response.status}`);}const{text}=await response.json();const botMessage={sender:\"bot\",text};setMessages(prev=>[...prev,botMessage]);}catch(error){console.error(\"APIリクエストエラー:\",error);setMessages(prev=>[...prev,{sender:\"bot\",text:\"サーバーエラーが発生しました。\"}]);}setInput(\"\");};return/*#__PURE__*/_jsxs(\"div\",{className:\"chat-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"chat-window\",children:messages.map((msg,index)=>/*#__PURE__*/_jsx(\"div\",{className:msg.sender,children:/*#__PURE__*/_jsx(\"div\",{className:\"message\",children:msg.text})},index))}),/*#__PURE__*/_jsxs(\"div\",{className:\"chat-input\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:input,onChange:e=>setInput(e.target.value),placeholder:\"\\u30E1\\u30C3\\u30BB\\u30FC\\u30B8\\u3092\\u5165\\u529B\\u3057\\u3066\\u304F\\u3060\\u3055\\u3044...\"}),/*#__PURE__*/_jsx(\"button\",{onClick:sendMessage,children:\"\\u9001\\u4FE1\"})]})]});}export default Chat;","map":{"version":3,"names":["React","useState","jsx","_jsx","jsxs","_jsxs","Chat","messages","setMessages","input","setInput","sendMessage","userMessage","sender","text","prev","response","fetch","method","headers","body","JSON","stringify","message","ok","Error","status","json","botMessage","error","console","className","children","map","msg","index","type","value","onChange","e","target","placeholder","onClick"],"sources":["/Users/shimizu/site/ronpa/src/components/Chat.js"],"sourcesContent":["import React, { useState } from \"react\";\n\nfunction Chat() {\n  const [messages, setMessages] = useState([]);\n  const [input, setInput] = useState(\"\");\n\n  const sendMessage = async () => {\n\tif (!input) return;\n\n\tconst userMessage = { sender: \"user\", text: input };\n\tsetMessages((prev) => [...prev, userMessage]);\n\n\ttry {\n\t  const response = await fetch(\"/api/generate-response\", {\n\t\tmethod: \"POST\",\n\t\theaders: { \"Content-Type\": \"application/json\" },\n\t\tbody: JSON.stringify({ message: input }),\n\t  });\n\n\t  if (!response.ok) {\n\t\tthrow new Error(`APIリクエストエラー: ${response.status}`);\n\t  }\n\n\t  const { text } = await response.json();\n\t  const botMessage = { sender: \"bot\", text };\n\t  setMessages((prev) => [...prev, botMessage]);\n\t} catch (error) {\n\t  console.error(\"APIリクエストエラー:\", error);\n\t  setMessages((prev) => [\n\t\t...prev,\n\t\t{ sender: \"bot\", text: \"サーバーエラーが発生しました。\" },\n\t  ]);\n\t}\n\n\tsetInput(\"\");\n  };\n\n  return (\n\t<div className=\"chat-container\">\n\t  <div className=\"chat-window\">\n\t\t{messages.map((msg, index) => (\n\t\t  <div key={index} className={msg.sender}>\n\t\t\t<div className=\"message\">{msg.text}</div>\n\t\t  </div>\n\t\t))}\n\t  </div>\n\t  <div className=\"chat-input\">\n\t\t<input\n\t\t  type=\"text\"\n\t\t  value={input}\n\t\t  onChange={(e) => setInput(e.target.value)}\n\t\t  placeholder=\"メッセージを入力してください...\"\n\t\t/>\n\t\t<button onClick={sendMessage}>送信</button>\n\t  </div>\n\t</div>\n  );\n}\n\nexport default Chat;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAExC,QAAS,CAAAC,IAAIA,CAAA,CAAG,CACd,KAAM,CAACC,QAAQ,CAAEC,WAAW,CAAC,CAAGP,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAACQ,KAAK,CAAEC,QAAQ,CAAC,CAAGT,QAAQ,CAAC,EAAE,CAAC,CAEtC,KAAM,CAAAU,WAAW,CAAG,KAAAA,CAAA,GAAY,CACjC,GAAI,CAACF,KAAK,CAAE,OAEZ,KAAM,CAAAG,WAAW,CAAG,CAAEC,MAAM,CAAE,MAAM,CAAEC,IAAI,CAAEL,KAAM,CAAC,CACnDD,WAAW,CAAEO,IAAI,EAAK,CAAC,GAAGA,IAAI,CAAEH,WAAW,CAAC,CAAC,CAE7C,GAAI,CACF,KAAM,CAAAI,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,wBAAwB,CAAE,CACxDC,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CAAE,cAAc,CAAE,kBAAmB,CAAC,CAC/CC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CAAEC,OAAO,CAAEd,KAAM,CAAC,CACtC,CAAC,CAAC,CAEF,GAAI,CAACO,QAAQ,CAACQ,EAAE,CAAE,CACnB,KAAM,IAAI,CAAAC,KAAK,CAAC,gBAAgBT,QAAQ,CAACU,MAAM,EAAE,CAAC,CACjD,CAEA,KAAM,CAAEZ,IAAK,CAAC,CAAG,KAAM,CAAAE,QAAQ,CAACW,IAAI,CAAC,CAAC,CACtC,KAAM,CAAAC,UAAU,CAAG,CAAEf,MAAM,CAAE,KAAK,CAAEC,IAAK,CAAC,CAC1CN,WAAW,CAAEO,IAAI,EAAK,CAAC,GAAGA,IAAI,CAAEa,UAAU,CAAC,CAAC,CAC9C,CAAE,MAAOC,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,cAAc,CAAEA,KAAK,CAAC,CACpCrB,WAAW,CAAEO,IAAI,EAAK,CACvB,GAAGA,IAAI,CACP,CAAEF,MAAM,CAAE,KAAK,CAAEC,IAAI,CAAE,iBAAkB,CAAC,CACxC,CAAC,CACJ,CAEAJ,QAAQ,CAAC,EAAE,CAAC,CACX,CAAC,CAED,mBACDL,KAAA,QAAK0B,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC7B7B,IAAA,QAAK4B,SAAS,CAAC,aAAa,CAAAC,QAAA,CAC5BzB,QAAQ,CAAC0B,GAAG,CAAC,CAACC,GAAG,CAAEC,KAAK,gBACvBhC,IAAA,QAAiB4B,SAAS,CAAEG,GAAG,CAACrB,MAAO,CAAAmB,QAAA,cACxC7B,IAAA,QAAK4B,SAAS,CAAC,SAAS,CAAAC,QAAA,CAAEE,GAAG,CAACpB,IAAI,CAAM,CAAC,EAD9BqB,KAEL,CACN,CAAC,CACI,CAAC,cACN9B,KAAA,QAAK0B,SAAS,CAAC,YAAY,CAAAC,QAAA,eAC5B7B,IAAA,UACEiC,IAAI,CAAC,MAAM,CACXC,KAAK,CAAE5B,KAAM,CACb6B,QAAQ,CAAGC,CAAC,EAAK7B,QAAQ,CAAC6B,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE,CAC1CI,WAAW,CAAC,yFAAmB,CAChC,CAAC,cACFtC,IAAA,WAAQuC,OAAO,CAAE/B,WAAY,CAAAqB,QAAA,CAAC,cAAE,CAAQ,CAAC,EACnC,CAAC,EACH,CAAC,CAEP,CAEA,cAAe,CAAA1B,IAAI","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}